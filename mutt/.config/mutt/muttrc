set ssl_starttls = yes
set ssl_force_tls = yes

set editor = "vim +$ +10"

set edit_headers = yes

# Connection details
source "~/.config/mutt/connection"
# This provides my_pw (via pass), folder (imap), realname, from, smtp_url and
# X-PGP-Key, X-PGP-Fingerprint headers.

set mbox_type = Maildir
set ts_enabled = yes

set imap_user = fionn
set spoolfile = +INBOX
set record = +INBOX/Sent
set trash = +INBOX/Trash
set postponed = +INBOX/Drafts
set header_cache = "~/.cache/mutt/headers/"

set imap_pass = $my_pw
set smtp_pass = $my_pw

set mail_check = 60
set timeout = 10
set net_inc = 1

set maildir_trash = yes

bind index g imap-fetch-mail
bind pager <up> previous-line
bind pager <down> next-line

# Only move read emails when they're actually looked at, not simply because we
# saw them in the list
set mark_old = no

# Organize into threads, sorting the threads by date
set sort = threads
set sort_aux = last-date-received

set text_flowed = yes
set send_charset = utf-8

# Attempt to decrypt inline PGP
# Equivalent to "Esc + P"
set pgp_auto_decode = yes

# Use GPGME
set crypt_use_gpgme = yes
# Apparently still necessary to identify addresses with keys

# Sign replies to signed email
set crypt_replysign = yes

# Encrypt replies to encrypted email
set crypt_replyencrypt = yes

# Encrypt and sign replies to encrypted and signed email
set crypt_replysignencrypted = yes

# Attempt to verify email signatures automatically
set crypt_verify_sig = yes

# Don't sign all sent mail
set crypt_autosign = no

# Aliases
set sort_alias = alias
set reverse_alias = yes
source "~/.config/mutt/aliases"

set date_format="!%Y-%m-%d %R%Z"

set include = yes
